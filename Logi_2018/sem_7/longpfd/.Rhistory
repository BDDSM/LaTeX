library(brew)
library(tools)
library(knitr)
# Function to write report
# Note that since I used "x" in my template I need to use
# "x" as my input in create.report.
create.report <- function(x, prepend = "MyFile_"){
rnw.file <- paste0(prepend, x, ".Rnw")
# This generates the actual rnw file for different seeds
brew('template.Rnw', rnw.file)
knit(rnw.file)
latex.file <- paste0(prepend, x, ".tex")
texi2pdf(latex.file, clean = TRUE, quiet = TRUE)
out.file <- paste0(prepend, x, ".pdf")
return(out.file)
}
# This is the input that will change in each report
seeds <- c(1, 2, 3)
# This is us generating the reports!
results <- sapply(seeds, create.report)
# Load the necessary packages
library(brew)
library(tools)
library(knitr)
# Function to write report
# Note that since I used "x" in my template I need to use
# "x" as my input in create.report.
create.report <- function(x, prepend = "MyFile_"){
rnw.file <- paste0(prepend, x, ".Rnw")
# This generates the actual rnw file for different seeds
brew('template.Rnw', rnw.file)
knit(rnw.file)
latex.file <- paste0(prepend, x, ".tex")
texi2pdf(latex.file, clean = TRUE, quiet = TRUE)
out.file <- paste0(prepend, x, ".pdf")
return(out.file)
}
# This is the input that will change in each report
seeds <- c(1, 2, 3)
# This is us generating the reports!
results <- sapply(seeds, create.report)
library(ggplot2)
x <- runif(100)
qplot(x)
x <- runif(1000)
qplot(x)
x <- runif(10000)
qplot(x)
x <- runif(100000)
qplot(x)
library(brew)
library(tools)
library(knitr)
setwd("~/Desktop/pdf")
prepend = "MyFile_"
rnw.file <- paste0(prepend, 123, ".Rnw")
rnw.file
prepend = "MyFile_"
x=123
rnw.file <- paste0(prepend, x, ".Rnw")
brew('template.Rnw', rnw.file)
x=444
brew('template.Rnw', rnw.file)
?brew
library(knitr)
opts_chunk$set(chache=TRUE)
opts_chunk$set(warning=FALSE,dev='png')
library("HSAUR")
library("dplyr")
library("psych")
library("lmtest")
library("glmnet")
library("ggplot2")
library("car")
library("sandwich")
library("tseries")
library("pander")
library("memisc")
df_train <- read.csv("macro_train.csv",sep=",",dec=".",header=TRUE)
df_test <- read.csv("macro_test.csv",sep=",",dec=".",header=TRUE)
library("HSAUR")
install.packages(HSAUR)
install.packages("HSAUR")
library("HSAUR")
library("dplyr")
library("psych")
install.packages("psych")
library("psych")
library("psych")
library("lmtest")
library("glmnet")
install.packages("hlmnet")
install.packages("glmnet")
library("glmnet")
library("glmnet")
library("ggplot2")
library("car")
install.packages("car")
library("car")
library("car")
library("sandwich")
library("tseries")
library("pander")
library("memisc")
df_train <- read.csv("macro_train.csv",sep=",",dec=".",header=TRUE)
setwd("~/Desktop/CMF 2/2 semestr/advanced econometrics/homeworks/Hw3")
df_train <- read.csv("macro_train.csv",sep=",",dec=".",header=TRUE)
df_test <- read.csv("macro_test.csv",sep=",",dec=".",header=TRUE)
pairs(df_train,pch=20)
model = lm(data = df_train, un ~ msup + dgnp + dem + ex)
summary(model)
bptest(model,varformula=NULL,data=NULL,studentize=FALSE)
gqtest(model,fraction=25,alternative="two.sided")
dwtest(model,alternative="two.sided")
df_new = mutate(df_train, un = un, msup = 1/msup, dgnp = 1/dgnp, dem = 1/dem, ex = 1/ex)
pairs(df_new)
model_n = lm(data = df_new, un ~ msup + dgnp + dem + ex)
summary(model_n)
BIC(model)
BIC(model_n)
bptest(model_n,varformula=NULL,data=NULL,studentize=FALSE)
gqtest(model_n,fraction=25,alternative="two.sided")
dwtest(model_n,alternative="two.sided")
df_new_new = mutate(df_new, msupq = msup^2,dgnpq = dgnp^2, demq = dem^2)
model_nn = lm(data = df_new_new, un ~lag(un, 1) + msup + msupq + dgnp + dgnpq + dem + demq + ex)
summary(model_nn)
BIC(model_nn)
bptest(model_nn,varformula=NULL,data=NULL,studentize=FALSE)
gqtest(model_nn,fraction=25,alternative="two.sided")
dwtest(model_nn,alternative="two.sided")
bgtest(model_nn)
x_0 <- model.matrix(data = df_train, un ~ msup + dgnp + dem + ex)
cor(x_0) #видим жесткую коррелированность!
x_n <- model.matrix(data=df_new,  un ~ msup + dgnp + dem + ex)
cor(x_n) #видим жесткую коррелированность!
x_nn <- model.matrix(data = df_new_new, un ~ msup + msupq + dgnp + dgnpq + dem + demq + ex)
cor(x_nn) #видим жесткую коррелированность!
y_nn <- df_new_new$un
lambdas <- seq(50,0.1,length=30)
m_lasso <- glmnet(x_nn,y_nn,alpha=1, lambda=lambdas)
plot(m_lasso,xvar="lambda", label=TRUE)
cv <- cv.glmnet(x_nn,y_nn,alpha=1)
plot(cv)
plot(m_lasso,xvar="lambda", label=TRUE)
cv <- cv.glmnet(x_nn,y_nn,alpha=1)
plot(cv)
cv$lambda.min # лямбда, минимизирующее сумму квадратов ощибок
cv$lambda.1se # небольшой проигрыш в ошибках
coef(cv,s="lambda.1se")
nd <- c(5,25,4,16,3,9,6)
predict(m_lasso, newx=nd, interval = "prediction")
predict(m_lasso, newx=nd, interval = "prediction")
pairs(df_new)
df_new = mutate(df_train, un = un, msup = 1/msup, dgnp = 1/dgnp, dem = 1/dem, ex = 1/ex)
pairs(df_new)
pairs(df_new)
)
)
pairs(df_train,pch=20)
df_new = mutate(df_train, un = un, msup = 1/msup, dgnp = 1/dgnp, dem = 1/dem, ex = 1/ex)
pairs(df_new)
model_n = lm(data = df_new, un ~ msup + dgnp + dem + ex)
summary(model_n)
BIC(model)
BIC(model_n)
bptest(model_n,varformula=NULL,data=NULL,studentize=FALSE)
# Load the necessary packages
library(brew)
library(tools)
library(knitr)
# Function to write report
# Note that since I used "x" in my template I need to use
# "x" as my input in create.report.
create.report <- function(x, prepend = "MyFile_"){
rnw.file <- paste0(prepend, x, ".Rnw")
# This generates the actual rnw file for different seeds
brew('template.Rnw', rnw.file)
knit(rnw.file)
latex.file <- paste0(prepend, x, ".tex")
texi2pdf(latex.file, clean = TRUE, quiet = TRUE)
out.file <- paste0(prepend, x, ".pdf")
return(out.file)
}
# This is the input that will change in each report
seeds <- c(1, 2, 3)
# This is us generating the reports!
results <- sapply(seeds, create.report)
setwd("~/Desktop/pdf")
# Load the necessary packages
library(brew)
library(tools)
library(knitr)
# Function to write report
# Note that since I used "x" in my template I need to use
# "x" as my input in create.report.
create.report <- function(x, prepend = "MyFile_"){
rnw.file <- paste0(prepend, x, ".Rnw")
# This generates the actual rnw file for different seeds
brew('template.Rnw', rnw.file)
knit(rnw.file)
latex.file <- paste0(prepend, x, ".tex")
texi2pdf(latex.file, clean = TRUE, quiet = TRUE)
out.file <- paste0(prepend, x, ".pdf")
return(out.file)
}
# This is the input that will change in each report
seeds <- c(1, 2, 3)
# This is us generating the reports!
results <- sapply(seeds, create.report)
?append
x <- c(1,2,3)
append(x,4)
x
setwd("~/Desktop/pdf (copy)")
legendary_anketa <- readline('head')
legendary_anketa
legendary_anketa <- readline('/head')
?readline
head <- file(description='head', open="r")
fileName <- "head.Rnw"
con <- file(fileName,open="r")
con
line <- readLines(con)
close(con)
line
fileName <- "head.Rnw"
head <- file(fileName,open="r")
st_head <- readLines(con)
close(head)
st_head
fileName <- "stocks.Rnw"
stocks <- file(fileName,open="r")
fileName <- "socks.Rnw"
socks <- file(fileName,open="r")
st_socks <- readLines(socks)
fileName <- "socks.Rnw"
socks <- file(fileName,open="r")
socks
st_socks <- readLines(socks)
fileName <- "socks.Rnw"
socks <- file(fileName,open="r")
st_socks <- readLines(socks)
close(socks)
st_socks
x=1
rnw.file <- paste0(prepend, x, ".Rnw")
x=1
prepend = "MyFile_"
x=1
prepend = "MyFile_"
rnw.file <- paste0(prepend, x, ".Rnw")
brew('template.Rnw', rnw.file)
library(brew)
library(tools)
library(knitr)
brew('template.Rnw', rnw.file)
x=1
prepend = "MyFile_"
rnw.file <- paste0(prepend, x, ".Rnw")
# This generates the actual rnw file for different seeds
brew('template.Rnw', rnw.file)
brew('body.Rnw', rnw.file)
create.anketa <- function(x, prepend = "Anketa_"){
rnw.file <- paste0(prepend,x,".Rnw")
brew('body.Rnw',rnw.file)
}
create.anketa(1)
create.anketa(5)
# Запоминаем шапочку :)
fileName <- "head.Rnw"
head <- file(fileName,open="r")
st_head <- readLines(head)
close(head)
st_head
Main_pdf <- st_head
txt <- '6'
txt <- '6'
txt <- paste0(txt,'99',collapse=" ")
txt
txt <- '6'
txt <- paste0(txt,'99',collapse="\n")
txt
txt <- '6'
txt <- paste0(txt,'99',collapse="\t")
txt
# Запоминаем носочки :)
fileName <- "socks.Rnw"
socks <- file(fileName,open="r")
st_socks <- readLines(socks)
close(socks)
st_socks
st_socks[1]
st_socks[2]
type(st_socks)
length(Main_pdf)
append(Main_pdf,st_socks)
length(append(Main_pdf,st_socks))
people <- c(1, 2, 3)
Main_pdf <- st_head
for(i in 1:length(peole)){
Main_pdf <- append(Main_pdf,create.anketa(i))
}
Main_pdf
paste0(str(66),'gggg')
paste0(as.string(66),'gggg')
as.str(1)
paste0(as.character(66),'gggg')
i=1
paste0(as.character(i),'.Rnw')
paste0('Anketa_',as.character(i),'.Rnw')
create.anketa(i)
fileName <- paste0('Anketa_',as.character(i),'.Rnw')
ank <- file(fileName,open='r')
st_ank <- readLines(ank)
close(ank)
Main_pdf <- append(Main_pdf,st_ank)
Main_pdf
# Подгружаем важные пакеты
library(brew)
library(tools)
library(knitr)
# Запоминаем шапочку :)
fileName <- "head.Rnw"
head <- file(fileName,open="r")
st_head <- readLines(head)
close(head)
st_head
# Запоминаем носочки :)
fileName <- "socks.Rnw"
socks <- file(fileName,open="r")
st_socks <- readLines(socks)
close(socks)
st_socks
create.anketa <- function(x, prepend = "Anketa_"){
rnw.file <- paste0(prepend,x,".Rnw")
brew('body.Rnw',rnw.file)
}
people <- c(1, 2, 3)
Main_pdf <- st_head
for(i in 1:length(peole)){
create.anketa(i)
fileName <- paste0('Anketa_',as.character(i),'.Rnw')
ank <- file(fileName,open='r')
st_ank <- readLines(ank)
close(ank)
Main_pdf <- append(Main_pdf,st_ank)
}
Main_pdf
people <- c(1, 2, 3)
Main_pdf <- st_head
for(i in 1:length(people)){
create.anketa(i)
fileName <- paste0('Anketa_',as.character(i),'.Rnw')
ank <- file(fileName,open='r')
st_ank <- readLines(ank)
close(ank)
Main_pdf <- append(Main_pdf,st_ank)
}
Main_pdf
Main_pdf <- append(Main_pdf,st_socks)
brew('Main_pdf.Rnw',Main_pdf)
main <- file('main.rnw',open='w')
writeLines(Main_pdf,main)
close(main)
knit(main.Rnw)
knit(main.rnw)
# Подгружаем важные пакеты
library(brew)
library(tools)
library(knitr)
fileName <- "head.Rnw"
head <- file(fileName,open="r")
st_head <- readLines(head)
close(head)
# Запоминаем носочки :)
fileName <- "socks.Rnw"
socks <- file(fileName,open="r")
st_socks <- readLines(socks)
close(socks)
# Осталось запомнить кучу одинаковых тел
# Будем создавать по отдельности кучу rnw отчётов, а после
# соединим их в единое целое с шапочкой и носочками
# Функция, которая для каждого 'x' создаёт по шаблону body.Rnw свою анкету
create.anketa <- function(x, prepend = "Anketa_"){
rnw.file <- paste0(prepend,x,".Rnw")
brew('body.Rnw',rnw.file)
}
# Объединим всё это чудо в цельный документ!
people <- c(1, 2, 3)
Main_pdf <- st_head
for(i in 1:length(people)){
create.anketa(i)
fileName <- paste0('Anketa_',as.character(i),'.Rnw')
ank <- file(fileName,open='r')
st_ank <- readLines(ank)
close(ank)
Main_pdf <- append(Main_pdf,st_ank)
}
# Не забываем добавить носочки! С шапочкой, но без носочков жизнь совсем не та!
Main_pdf <- append(Main_pdf,st_socks)
# Записываем всё это дело в один большой rnw-файлик!
main <- file('main.rnw',open='w')
writeLines(Main_pdf,main)
close(main)
# Осталось собрать итоговый файл в одно целое и почистить папку от мусора!
# Делай раз! Собираем.
knit(main.rnw)
main <- file('main.rnw',open='w')
writeLines(Main_pdf,main)
knit(main.rnw)
close(main)
library(brew)
library(tools)
library(knitr)
# Запоминаем шапочку :)
fileName <- "head.Rnw"
head <- file(fileName,open="r")
st_head <- readLines(head)
close(head)
# Запоминаем носочки :)
fileName <- "socks.Rnw"
socks <- file(fileName,open="r")
st_socks <- readLines(socks)
close(socks)
# Осталось запомнить кучу одинаковых тел
# Будем создавать по отдельности кучу rnw отчётов, а после
# соединим их в единое целое с шапочкой и носочками
# Функция, которая для каждого 'x' создаёт по шаблону body.Rnw свою анкету
create.anketa <- function(x, prepend = "Anketa_"){
rnw.file <- paste0(prepend,x,".Rnw")
brew('body.Rnw',rnw.file)
}
# Объединим всё это чудо в цельный документ!
people <- c(1, 2, 3)
Main_pdf <- st_head
for(i in 1:length(people)){
create.anketa(i)
fileName <- paste0('Anketa_',as.character(i),'.Rnw')
ank <- file(fileName,open='r')
st_ank <- readLines(ank)
close(ank)
Main_pdf <- append(Main_pdf,st_ank)
}
# Не забываем добавить носочки! С шапочкой, но без носочков жизнь совсем не та!
Main_pdf <- append(Main_pdf,st_socks)
# Записываем всё это дело в один большой rnw-файлик!
main <- file('main.rnw',open='w')
writeLines(Main_pdf,main)
close(main)
knit(main.rnw)
prepend = "MyFile_"
x=1
rnw.file <- paste0(prepend, x, ".Rnw")
brew('template.Rnw', rnw.file)
brew('body.Rnw', rnw.file)
knit(rnw.file)
brew('body.Rnw', rnw.file)
prepend = "MyFile_"
x=1
rnw.file <- paste0(prepend, x, ".Rnw")
# This generates the actual rnw file for different seeds
brew('body.Rnw', rnw.file)
knit("main.rnw")
latex.file <- paste0(main, ".tex")
texi2pdf("main.tex", clean = TRUE, quiet = TRUE)
knit("main.rnw")    # связываем tex-файл через knitr!
texi2pdf("main.tex", clean = TRUE, quiet = TRUE)
texi2pdf("main.tex", clean = TRUE, quiet = TRUE)
knit2pdf(input="main.Rnw", quiet = TRUE)
knit("main.Rnw")    # связываем tex-файл через knitr!
# Подгружаем важные пакеты
library(brew)
library(tools)
library(knitr)
# Запоминаем шапочку :)
fileName <- "head.Rnw"
head <- file(fileName,open="r")
st_head <- readLines(head)
close(head)
# Запоминаем носочки :)
fileName <- "socks.Rnw"
socks <- file(fileName,open="r")
st_socks <- readLines(socks)
close(socks)
create.anketa <- function(x, prepend = "Anketa_"){
rnw.file <- paste0(prepend,x,".Rnw")
brew('body.Rnw',rnw.file)
}
people <- c(1, 2, 3)
Main_pdf <- st_head
for(i in 1:length(people)){
create.anketa(i)
fileName <- paste0('Anketa_',as.character(i),'.Rnw')
ank <- file(fileName,open='r')
st_ank <- readLines(ank)
close(ank)
Main_pdf <- append(Main_pdf,st_ank)
}
# Не забываем добавить носочки! С шапочкой, но без носочков жизнь совсем не та!
Main_pdf <- append(Main_pdf,st_socks)
# Записываем всё это дело в один большой rnw-файлик!
main <- file('main.rnw',open='w')
writeLines(Main_pdf,main)
close(main)
# Осталось собрать итоговый файл в одно целое и почистить папку от мусора!
# Делай раз! Собираем!
main <- file('main.Rnw',open='w')
writeLines(Main_pdf,main)
close(main)
knit2pdf(input="main.Rnw", quiet = TRUE)
knit("main.Rnw")    # связываем tex-файл через knitr!
texi2pdf("main.tex", clean = TRUE, quiet = TRUE)
